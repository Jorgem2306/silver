<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Invitación Cumpleaños 🎂</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
}

/* Contenedor libro vertical */
.book {
  width: 400px;   /* ancho más pequeño */
  height: 600px;  /* alto mayor */
  perspective: 2000px;
  position: relative;
}

/* Páginas */
.page {
  width: 100%;
  height: 100%;
  background: #fff;
  position: absolute;
  top: 0;
  left: 0;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  border-radius: 8px;
  overflow: hidden;
  backface-visibility: hidden;
  transform-origin: left;
  cursor: pointer;
  transition: transform 2.5s ease; /* 🔹 Más lento */
}

/* Contenido de las páginas */
.contenido {
  padding: 30px;
}

/* Portada encima */
.front {
  z-index: 2;
  background: #ffeaea;
}

/* Página interior */
.inside {
  z-index: 1;
  background: #fff;
}

/* Clase para abrir el libro */
.open {
  transform: rotateY(-180deg);
}

label {
  display: block;
  margin-top: 10px;
  font-weight: bold;
}

input, select {
  width: 100%;
  padding: 6px;
  margin-top: 5px;
  border: 1px solid #ccc;
  border-radius: 8px;
}

button {
  margin-top: 15px;
  padding: 10px;
  background: #ff6b81;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
}

button:hover {
  background: #ff4757;
}

#mensaje {
  margin-top: 15px;
  font-weight: bold;
}

canvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}
</style>
</head>
<body>

<canvas id="confetti"></canvas>

<div class="book">
  <!-- Portada -->
  <div class="page front" id="frontPage">
    <div class="contenido">
      <h1>🎉 ¡Estás invitado! 🎉</h1>
      <img src="https://static-cdn.jtvnw.net/jtv_user_pictures/fc67eed3-15b9-4ac1-97ff-836727396aa4-profile_image-300x300.jpeg" alt="Imagen silver" style="width:100%; height:auto; max-height: 250px; border-radius: 8px; margin-bottom: 20px;">
      <p><b>15 de octubre</b> - <b>5:00 p.m.</b></p>
      <p>Haz clic para abrir la invitación 🥳</p>
    </div>
  </div>

  <!-- Página interior -->
  <div class="page inside">
    <div class="contenido">
      <h2>Confirma tu asistencia</h2>
      <form id="miFormulario">
        <label for="nombre">Nombre:</label>
        <input type="text" id="nombre" name="nombre" required>

        <label for="asistencia">¿Asistirás?</label>
        <select id="asistencia" name="asistencia" required>
          <option value="">--Selecciona--</option>
          <option value="Sí">Sí 🎉</option>
          <option value="No">No ❌</option>
          <option value="Tal vez">Tal vez 🤔</option>
        </select>

        <button type="submit">Confirmar ✅</button>
      </form>
      <p id="mensaje"></p>
    </div>
  </div>
</div>

<script>
// 🎉 Animación confeti
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let confettis = [];
for (let i = 0; i < 120; i++) {
  confettis.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 6 + 2,
    d: Math.random() * 0.05 + 0.02,
    color: `hsl(${Math.random() * 360}, 100%, 50%)`
  });
}

function drawConfetti() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  confettis.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2, false);
    ctx.fillStyle = c.color;
    ctx.fill();
  });
  updateConfetti();
}

function updateConfetti() {
  confettis.forEach(c => {
    c.y += c.d * 5;
    if (c.y > canvas.height) {
      c.y = -10;
      c.x = Math.random() * canvas.width;
    }
  });
}

setInterval(drawConfetti, 20);

// Abrir el libro al hacer clic
const front = document.getElementById("frontPage");
front.addEventListener("click", () => {
  front.classList.add("open");
});

// 🎯 Conexión Google Sheets
document.getElementById("miFormulario").addEventListener("submit", function(e) {
  e.preventDefault();
  let datos = {
    nombre: e.target.nombre.value,
    asistencia: e.target.asistencia.value
  };
  fetch("https://script.google.com/macros/s/AKfycby6ibjNM-7_M8M3UJZKVOJdifbtgO3eGDPwBL9hOgsPQxMdIO3ihCfv_rI-9cZdFx70mA/exec", {
    method: "POST",
    body: JSON.stringify(datos)
  })
  .then(res => res.text())
  .then(txt => {
    document.getElementById("mensaje").innerText = "✅ ¡Gracias! Tu asistencia fue registrada.";
    e.target.reset();
  })
  .catch(err => {
    document.getElementById("mensaje").innerText = "❌ Error al enviar. Intenta de nuevo.";
  });
});
</script>

</body>
</html>
